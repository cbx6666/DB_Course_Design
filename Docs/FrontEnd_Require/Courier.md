# 骑手端核心页面前端说明文档

**存放路径**：`../Docs/FrontEnd_Requirement`

---

## 页面描述

本页面是专为骑手设计的高集成单页面应用（SPA）。  
通过底部标签栏（**Bottom Tab Bar**）整合三个核心功能模块：

1. **工作台（Home）**：管理骑手实时工作状态、查看位置信息与地图。
2. **订单（Orders）**：集中展示并管理不同状态的订单。
3. **我的（Profile）**：展示个人资料、业绩指标与设置入口。

此外，该页面还包含**实时新订单接收弹窗**，是骑手接单的核心交互界面。

**页面路径**：`/rider/dashboard` （或其他骑手端主路由）

---

## 页面功能点

### 通用功能
- 进入页面时显示**加载动画**。
- 数据加载失败时提供**重试功能**。

---

### 工作台模块（Home）
- 实时展示骑手**“在线”/“离线”**工作状态。
- 核心操作按钮：**开工 / 收工** 切换。
- 展示**当前服务区域地图**。

---

### 订单模块（Orders）
- 顶部标签页筛选：
  - 待处理（`pending`）
  - 配送中（`delivering`）
  - 已完成（`completed`）
- 列表展示关键信息：
  - 订单ID
  - 商家名称
  - 顾客地址
  - 配送费
  - 状态及中文描述

---

### 我的模块（Profile）
- 展示：
  - 头像
  - 姓名
  - 骑手ID
  - 注册日期
- 业绩指标：
  - 获评均分
  - 信誉积分
- 当月薪资总览
- 进入 **账号与资料设置** 的导航链接

---

### 新订单弹窗（Modal）
- 自动弹出，带**30秒倒计时**（超时自动关闭）。
- 展示：
  - 地图路线
  - 商家与顾客地址
  - 配送距离
  - 配送费
- 操作按钮：
  - 接受
  - 拒绝

---

## 接口说明

### 1. 获取骑手个人资料
**用途**：我的页面获取个人信息  
**输入**：无  
**输出**：

| 字段名       | 说明                |
| ------------ | ------------------- |
| name         | 骑手姓名            |
| id           | 骑手唯一ID          |
| registerDate | 注册日期 YYYY-MM-DD |
| rating       | 获评均分（数字）    |
| creditScore  | 信誉积分（数字）    |

---

### 2. 获取骑手当前工作状态
**用途**：判断当前是否在线  
**输入**：无  
**输出**：

| 字段名  | 说明                               |
| ------- | ---------------------------------- |
| isOnline| `true` 表示在线，`false` 表示离线 |

---

### 3. 切换骑手工作状态
**用途**：切换开工/收工  
**输入**：

| 字段名  | 类型    | 必填 | 说明                     |
| ------- | ------- | ---- | ------------------------ |
| isOnline| boolean | 是   | 要切换的新状态           |

**输出**：

| 字段名 | 说明               |
| ------ | ------------------ |
| success| 操作是否成功 true/false |

---

### 4. 获取骑手当月收入
**用途**：我的页面薪资显示  
**输入**：无  
**输出**：纯数字（示例：`3450`）

---

### 5. 获取骑手当前位置信息
**用途**：工作台展示服务区域  
**输入**：无  
**输出**：

| 字段名 | 说明                      |
| ------ | ------------------------- |
| area   | 当前位置文本（例：人民广场商圈） |

---

### 6. 获取订单列表
**用途**：订单页面根据状态筛选  
**输入**（Query Params）：

| 字段名 | 类型   | 必填 | 说明                              |
| ------ | ------ | ---- | --------------------------------- |
| status | string | 是   | `pending` / `delivering` / `completed` |

**输出**（数组）：

| 字段名     | 说明                  |
| ---------- | --------------------- |
| id         | 订单唯一ID            |
| status     | 订单状态              |
| restaurant | 商家名称              |
| address    | 顾客收货地址          |
| fee        | 配送费（字符串保留两位小数） |
| statusText | 状态中文描述          |

---

### 7. 获取新订单详情
**用途**：新订单弹窗信息展示  
**输入**（URL Parameter）：

| 字段名        | 类型   | 必填 | 说明                  |
| ------------- | ------ | ---- | --------------------- |
| notificationId| string | 是   | 新订单推送唯一ID      |

**输出**：

| 字段名          | 说明                  |
| --------------- | --------------------- |
| id              | 新订单唯一ID          |
| restaurantName  | 商家名称              |
| restaurantAddress| 商家地址             |
| customerName    | 顾客姓名              |
| customerAddress | 顾客收货地址          |
| distance        | 配送距离（字符串）    |
| fee             | 配送费（数字）        |
| mapImageUrl     | 地图图片URL           |

---

### 8. 接受订单
**用途**：新订单弹窗接受按钮  
**输入**（URL Parameter）：

| 字段名 | 类型   | 必填 | 说明           |
| ------ | ------ | ---- | -------------- |
| orderId| string | 是   | 接受的订单ID   |

**输出**：

| 字段名 | 说明               |
| ------ | ------------------ |
| success| 操作是否成功 true/false |

---

### 9. 拒绝订单
**用途**：新订单弹窗拒绝按钮  
**输入**（URL Parameter）：

| 字段名 | 类型   | 必填 | 说明           |
| ------ | ------ | ---- | -------------- |
| orderId| string | 是   | 拒绝的订单ID   |

**输出**：

| 字段名 | 说明               |
| ------ | ------------------ |
| success| 操作是否成功 true/false |

---


